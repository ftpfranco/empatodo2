!function(t){var o={};function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,o,e){a.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:e})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,o){if(1&o&&(t=a(t)),8&o)return t;if(4&o&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(a.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var n in t)a.d(e,n,function(o){return t[o]}.bind(null,n));return e},a.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(o,"a",o),o},a.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},a.p="/",a(a.s=15)}({15:function(t,o,a){t.exports=a(16)},16:function(t,o){$(document).ready((function(){function t(){var t=0;return $(".subtotal").each((function(){t+=parseFloat($(this).text())})),t=t.toFixed(2),$(".total-subtotal").val(t),$(".total-total").val(t),t}$(document).on("click",".monto",(function(){var t=$(".total-total").val();$(".monto").val(t)})),$(document).on("change",".proveedor,.fecha,.select-articulo",(function(){$(".compra-guardar").removeAttr("disabled")})),$(document).on("change",".select-articulo",(function(){$(".compra-guardar").removeAttr("disabled");var o=$(this).val(),a=$(this).text(),e=$(this).val().split("_"),n=(e[0],e[1],e[2]),l=e[3],r='\n            <tr>\n                <td class="text-bold-500 articulo-id" data-id="'.concat(o,'" hidden> ').concat(o,' </td>\n                <td class="text-bold-500"> ').concat(a||"",' </td>\n                <td>\n                    <input type="number" class="form-control articulo-cantidad" value="1">\n                </td>\n                <td>\n                    <input type="number" class="form-control precio-compra" value="').concat(l||0,'">\n                </td>\n                <td>\n                    <input type="number" class="form-control precio-venta" value="').concat(n||0,'">\n                </td>\n                <td class="subtotal"> ').concat(l||0,'</td>\n                <td>\n                    <button class="btn btn-danger btn-sm articulo-eliminar mt-1"  data-bs-toggle="tooltip" data-bs-placement="top" title="Eliminar" data-bs-original-title="Eliminar" >  <i class="bi bi-trash"></i>  </button>\n\n\n                </td>\n            </tr>\n        ');$(".articulos-listado").append(r),t()})),$(document).on("keyup",".articulo-cantidad",(function(){var o=$(this).val()*$(this).parent().parent().find(".precio-compra").val();o=parseFloat(o).toFixed(2);$(this).parent().parent().find(".subtotal").text(o),t(),$(".total-descuento-porcentaje").val(""),$(".total-descuento-monto").val("")})),$(document).on("keyup",".precio-compra",(function(){var o=$(this).parent().parent().find(".articulo-cantidad").val()*$(this).val();o=parseFloat(o).toFixed(2);$(this).parent().parent().find(".subtotal").text(o),t(),$(".total-descuento-porcentaje").val(""),$(".total-descuento-monto").val("")})),$(document).on("keyup",".pago-efectivo",(function(){!function(){var t=$(".total-total").val(),o=0,a=0;$(".montos").each((function(){var t=""==$(this).val()||null==$(this).val()||null==$(this).val()?0:parseFloat($(this).val());a+=t})),""==t||null==t||null==t?$(".pago-vuelto").val(0):(o=a-parseFloat(t),$(".pago-vuelto").val(o))}()})),$(document).on("keyup",".total-descuento-porcentaje",(function(){var o=null==$(this).val()?0:$(this).val(),a=t(),e=a*(o/100),n=a-e;e=parseFloat(e).toFixed(2),n=parseFloat(n).toFixed(2),$(".total-descuento-monto").val(e),$(".total-total").val(n)})),$(document).on("keyup",".total-descuento-monto",(function(){var o=null==$(this).val()||""==$(this).val()?0:$(this).val(),a=t(),e=a-o;if(o>0){var n=o*(100/a);$(".total-descuento-porcentaje").val(n)}else $(".total-descuento-porcentaje").val("");e=parseFloat(e).toFixed(2),$(".total-total").val(e)})),$(document).on("click",".articulo-eliminar",(function(){$(this).parent().parent().remove(),t(),$(".total-descuento-porcentaje").val(""),$(".total-descuento-monto").val("")})),$(document).on("click",".compra-guardar",(function(){$(".compra-guardar").attr("disabled","disabled"),function(){var t={proveedor:$(".proveedor").val(),pagos_id:$(".tipopago").val(),pagos_monto:$(".monto").val(),fecha:$(".fecha").val(),articulos:{},descuentos:{},comentario:$(".pago-comentario").val()};$(".articulos-listado>tr").each((function(o,a){console.log(o),console.log($(this).val());var e={articulo_id:$(this).find(".articulo-id").attr("data-id").split("_")[0],articulo_cantidad:$(this).find(".articulo-cantidad").val(),precio_compra:$(this).find(".precio-compra").val(),precio_venta:$(this).find(".precio-venta").val()};t.articulos[o]=e})),t.descuentos[0]={porcentaje:$(".total-descuento-porcentaje").val(),monto:$(".total-descuento-monto").val()},console.log(t),null==t.articulos&&Toastify({text:"Agregue articulos para completar la compra!",duration:3e3,close:!0}).showToast();void 0!==t.articulos&&$.ajax({type:"post",url:"compras",data:t,dataType:"json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(t){console.log(t),"success"==t.status&&($(".articulos-listado").empty(),$(".proveedor").val(""),$(".pago-comentario").val(""),$(".pago-efectivo").val(""),$(".pago-debito").val(""),$(".pago-credito").val(""),$(".pago-cc").val(""),$(".pago-otro").val(""),$(".total-subtotal").val(""),$(".total-descuento").val(""),$(".total-descuento-porcentaje").val(""),$(".total-descuento-monto").val(""),$(".total-total").val("")),t.errors&&t.errors.forEach((function(t){console.log(t),Toastify({text:t,duration:3e3,close:!0}).showToast()})),t.message&&Toastify({text:t.message,duration:3e3,close:!0}).showToast()},error:function(t){console.log(t),Toastify({text:JSON.parse(t.responseText).message,duration:3e3,close:!0}).showToast()}})}()}))}))}});